config:

  #################################### PRODUCT CONFIG #####################################

  namespace: persistor
  # component selection
  deployPersistor: true

  resourceTags:
    team: dataphos
    env: dev

  # persistor chart config
  dataphos-persistor:
    persistor:
      persistor:
        broker: strimzi-kafka
        topic: input-topic
        consumerID: input-topic-sub
        storage: google-cloud-storage
        storageTargetID: dataphos-dest-bucket-dev
        indexer: indexer # Indexer reference (if not set the indexer plugin is disabled)
        deadletterTopic: deadletter-topic-per
        replicas: 1

    indexer:
      indexer:
        broker: strimzi-kafka
        topic: indexer-topic
        consumerID: indexer-topic-sub
        deadletterTopic: deadletter-topic-idx
        replicas: 1 # Scale the service exposing the metadata
        consumerReplicas: 1 # Scale the consumers reading and storing the metadata
        storageSize: 1Gi

    resubmitter:
      resubmitter:
        broker: strimzi-kafka
        storage: google-cloud-storage
        indexer: indexer


  ################################# INFRASTRUCTURE CONFIG #################################

  # platform config
  gcp:project: persistor-project
  gcp:region: europe-west2 # default region
  gcp:zone: europe-west2-a # default zone

  # cluster config
  cluster:
    gke-cluster:
      type: gke
      name: gke-cluster
      projectID: persistor-project
      location: europe-west2-a # optional region or zone
      initialNodeCount: 3


  # broker config
  brokers:
    strimzi-kafka:
      type: kafka
      clusterNamespace: kafka-cluster
      clusterName: kafka-cluster

      topics:
        input-topic:
          subscriptions:
            input-topic-sub: {}
        indexer-topic:
          subscriptions:
            indexer-topic-sub: {}
        deadletter-topic-per: {}
        deadletter-topic-idx: {}


  # storage config
  storage:
    google-cloud-storage:
      type: gcs
      projectID: persistor-project

      buckets:
        dataphos-dest-bucket-dev: {}
